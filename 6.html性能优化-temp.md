- 本文撰写于：
    - 时间: 2020年6月15日
    - 版本: Google Chrome	83.0.4103.61 (正式版本) （64 位）

----

- 怎么知道 我该优化哪里？这就用到下面等这个工具了
    - Lighthouse - Chrome官方分析工具
    - gtmetrix 你的网站还能如何优化？
- # Lighthouse - Chrome官方分析工具
    - Lighthouse 在旧版本的Chrome里叫 Audits, 现在改名叫 Lighthouse 了
    - ![](./img/html-optimization/chrome-lighthouse-use.jpg)
    - ![](./img/html-optimization/chrome-lighthouse.jpg)
- # [【pagespeed insights】 使您的网页在所有设备上都能快速加载](https://developers.google.com/speed/pagespeed/insights/)
    - Google 在线版 Lighthouse
    - ![](./img/html-optimization/developers.google.com_speed_pagespeed_insights__url=gztata.com&tab=desktop.jpg)
- # [【gtmetrix】你的网站还能如何优化？](https://gtmetrix.com/)
    - 查看您网站的效果，揭示网站运行缓慢的原因，并发现优化机会
    - 下面看一下测试结果 和 优化建议
    ![](./img/html-optimization/gtmetrix.com_reports.jpg)

----

- 先看一下很重要的Google官方讲解视频
- [Improving Load Performance - Chrome DevTools 101 - 【Youtube】](https://www.youtube.com/watch?v=5fLW5Q5ODiE&t=182s)

- # 开启压缩 (Gzip)
    - 服务端配置启用压缩，让资源在网络传输对过程中 尽可能的小，等浏览器加载好资源后 再进行解压，还原文件
    - [前端性能优化之gzip](https://segmentfault.com/a/1190000012571492)
- ![](./img/html-optimization/1.jpg)
- ![](./img/html-optimization/2.jpg)

- # [Chrome的First Paint 【百度EUX】](http://eux.baidu.com/blog/fe/Chrome%E7%9A%84First%20Paint)
    - `First paint`:  直译过来的意思就是浏览器第一次渲染(paint)，在First paint之前是白屏，在这个时间点之后用户就能看到（部分）页面内容。
    - `第一脚本`：我们就把body中的第一个外链脚本叫做【第一脚本】
    > 结论：
    > 
    > 情况1：如果第一脚本前的JS和CSS加载完了，body中的脚本还未下载完成，那么浏览器就会利用构建好的局部CSSOM和DOM提前渲染第一脚本前的内容（触发FP）；
    > 
    > 情况2：如果第一脚本前的JS和CSS都还没下载完成，body中的脚本就已经下载完了，那么浏览器就会在所有JS脚本都执行完之后才触发FP。
    - ## 建议：
        - CSS放在head中，JS放在</body>前（如果在head必须放JS，也尽量减少他的大小，把大JS文件放</body>前）。
        - 减小head中CSS和JS大小（gzip[了解一下？](https://segmentfault.com/a/1190000012800222))，
        - 优化head中的JS和CSS外链的网络情况，减少Stalled、TTFB和Content Download的时间。
        - 在第一脚本前使用骨架图，可以减少用户的白屏感知时间（对于使用JS插入模板来渲染的框架，建议将骨架图的路由生成逻辑单独提出来）